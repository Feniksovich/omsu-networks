# 3.1. Конфигурирование стандартных списков доступа
ACL (Access Control List) – список доступа.

## Команды
Создание правил для стандартных ACL
```yaml
access-list <number> <permit|deny> <source_ip|any> [wildcard mask]
```

Удалить созданный ACL по номеру
```yaml
no access-list <number>
```

Применение ACL к интерфейсу
- `in` — фильтрация входящего трафика
- `out` — фильтрация исходящего трафика
```yaml
interface <interface_name>
    ip access-group <number> <in|out>
```

Отвзяка ACL от интерфейса
```yaml
interface <interface_name>
    no ip access-group <number> <in|out>
```

Показать конфигурацию всех ACL или ACL по номеру
```yaml
show access-lists [number]
```

## Вводная информация
| Сеть        | Адрес       | Маска подсети   |
|------------ |-------------|-----------------|
| A (слева)   | 192.168.1.0 | 255.255.255.0   |
| B (справа)  | 192.168.2.0 | 255.255.255.0   |
| M (M1 ↔ M2) | 10.0.0.0    | 255.255.255.252 |

> [!WARNING]
> Сеть M использует маску бесклассовой адресации (255.255.255.252), для работы которой требуется включение RIP v2 на соответствующих маршрутизаторах.

### Топология
![topology](https://i.imgur.com/rasnj1N.png)

## Базовая конфигурация сети
Маршрутизация в сети будет осуществляться с помощью протокола RIP v2.

### Маршрутизатор M1
```yaml
int fa0/0
    ip address 192.168.1.1 255.255.255.0
    no shutdown
    exit
    
int s2/0
    ip address 10.0.0.1 255.255.255.252
    no shutdown
    exit

# Конфигурирование RIP
router rip
    version 2           # включает поддержку VLSM (бесклассовой адресации)
    network 10.0.0.0
    network 192.168.1.0
    end
```

### Маршрутизатор M2
```yaml
int fa0/0
    ip address 192.168.2.1 255.255.255.0
    no shutdown
    exit

int s2/0
    ip address 10.0.0.2 255.255.255.252
    no shutdown
    exit

router rip
    version 2
    network 10.0.0.0
    network 192.168.2.0
    end
```

## Конфигурация списков доступа
### Ограничение по адресу хоста
Запретим хосту с адресом 192.168.1.2 из сети A передавать пакеты на маршрутизатор M1. Это автоматически ограничит доступ к сети B.

#### Маршрутизатор M1
```yaml
access-list 1 deny 192.168.1.2 # запрещает трафик от хоста
access-list 1 permit any       # разрешает любой другой трафик

int fa0/0
    ip access-group 1 in # применяет правила ACL 1 к интерфейсу на вход
    exit
```

Пинг с хоста 192.168.1.2 до хоста 192.168.2.2 вернет ICMP ответ "Destination host unreachable".

### Ограничение по маске
Запретим любым хостам из сети A передавать пакеты на маршрутизатор M1. Это автоматически ограничит доступ к сети B.

#### Маршрутизатор M1
```yaml
access-list 1 deny 192.168.1.0 0.0.0.255 # запрещает трафик из сети A
access-list 1 permit any                 # разрешает любой другой трафик

int fa0/0
    ip access-group 1 in # применяет правила ACL 1 к интерфейсу на вход
    exit
```

Пинг с любого хоста сети A до хоста 192.168.2.2 вернет ICMP ответ "Destination host unreachable".